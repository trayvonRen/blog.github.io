## 在传输层进行压缩

### 使用 GZIP

Nginx 开启 Gzip 压缩功能， 可以使网站的 css、js 、xml、html 文件在传输时进行压缩，提高访问速度, 进而优化 Nginx 性能! Web 网站上的图片，视频等其它多媒体文件以及大文件，因为压缩效果不好，所以对于图片没有必要支压缩，如果想要优化，可以图片的生命周期设置长一点，让客户端来缓存。 开启 Gzip 功能后，Nginx 服务器会根据配置的策略对发送的内容, 如 css、js、xml、html 等静态资源进行压缩, 使得这些内容大小减少，在用户接收到返回内容之前对其进行处理，以压缩后的数据展现给客户。这样不仅可以节约大量的出口带宽，提高传输效率，还能提升用户快的感知体验, 一举两得; 尽管会消耗一定的 cpu 资源，但是为了给用户更好的体验还是值得的。

经过 Gzip 压缩后页面大小可以变为原来的 30%甚至更小，这样，用户浏览页面的时候速度会快得多。Gzip 的压缩页面需要浏览器和服务器双方都支持，实际上就是服务器端压缩，传到浏览器后浏览器解压并解析。浏览器那里不需要我们担心，因为目前的巨大多数浏览器 都支持解析 Gzip 过的页面。

## 开启 Keep Alive

HTTP 协议采用“请求-应答”模式，不开启 KeepAlive 模式时，每个 req/res 客户端和服务端都要新建一个连接，完成之后立即断开连接（HTTP 协议为无连接的协议）；当开启 Keep-Alive 模式（又称持久连接、连接重用）时，Keep-Alive 功能使客户端到服务器端的连接持续有效，当出现对服务器的后继请求时，Keep-Alive 功能避免了建立或者重新建立连接。

**http1.1 是默认 开启 keep alive**

## HTTP 资源缓存

- 协商缓存
  - cache-controll
  - expire
- 强缓存
  - etag
  - last-modify

nginx 默认开启资源强/协商缓存

## 启用 serviceWork

使用脚手架工具生成

## 启用 HTTP2

#### 二进制传输

#### 头部压缩

#### 多路复用

#### 服务器推送

```s
server {
    ...
    location / {
      root   /usr/share/nginx/html;
      index  index.html index.htm;
      http2_push /style.css;
      http2_push /example.png;
    }
}
```

## 启用 CDN

## 避免重定向
