资源的优先级被分为 5 级。不同资料上，对这 5 级的命名描述上可能有所不同。主要是因为资料本身可能是从网络层面，浏览器内核或者用户端控制台显示这三个方向中的某一个来说的。  
这三个方向虽然对这 5 级的命名不同，但都是一一对应的。  
网络层面，5 级分别为：Highest、Medium、Low、Lowest、Idle;  
浏览器内核，5 级分别为：VeryHigh、High、Medium、Low、VeryLow;  
用户端控制台显示，5 级分别为：Highest、High、Medium、Low、Lowest;

## 资源优先级计算

下面是以浏览器内核作为研究方向，来介绍浏览器的资源优先级计算过程：

第一步，根据资源的类型来设定默认优先级。

- 对于每一类资源浏览器都有一个默认的加载优先级规则：
- html、css、font 这三种类型的资源优先级最高；
- 然后是 preload 资源（通过`<link rel=“preload">`标签预加载）、script、xhr 请求；
- 接着是图片、语音、视频；
- 最低的是 prefetch 预读取的资源。

第二步，根据一定的实际规则，对优先级进行调整。
初始优先级设置好以后，浏览器会根据资源的实际属性和位于文档中的位置等方面，对优先级进行调整，来确定出最终的加载优先级顺序。对于几个常见资源类型的调整规则如下：

- 对于 XHR 请求资源：将同步 XHR 请求的优先级调整为最高。
  XHR 请求可以分为同步请求和异步请求，浏览器会把同步请求的优先级提升到最高级，以便尽早获取数据、加快页面的显示。
- 对于图片资源：会根据图片是否在可见视图之内来改变优先级。
  图片资源的默认优先级为 Low。现代浏览器为了提高用户首屏的体验，在渲染时会计算图片资源是否在首屏可见视图之内，在的话，会将这部分视口可见图片(Image in viewport)资源的优先级提升为 High。
- 对于脚本资源：浏览器会将根据脚本所处的位置和属性标签分为三类，分别设置优先级。  
  首先，对于添加了 defer/async 属性标签的脚本的优先级会全部降为 Low。  
  然后，对于没有添加该属性的脚本，根据该脚本在文档中的位置是在浏览器展示的第一张图片之前还是之后，又可分为两类。在之前的(标记 early**)它会被定为 High 优先级，在之后的(标记 late**)会被设置为 Medium 优先级。
